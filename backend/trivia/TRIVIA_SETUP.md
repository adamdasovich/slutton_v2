# Daily Trivia with Claude AI - Setup Guide

## Overview
The trivia game now features **15 witty, sexy, sensual, challenging questions** generated daily by Claude AI, along with sensual sound effects and sexy animations.

## Features
- ‚ú® **15 Questions per Game** (upgraded from 6)
- ü§ñ **Auto-Generated by Claude AI** - Fresh questions daily
- üéµ **Sensual Sound Effects** - Question reveals, correct/incorrect answers, completion
- üíÉ **Sexy Animations** - Smooth transitions, pulse effects, playful feedback
- üèÜ **Competitive Leaderboard** - 1st (100pts), 2nd (50pts), 3rd (25pts) + 10pts for all
- üí∞ **Reward Points** - 1 point = $0.10 off purchases

## Setup Instructions

### 1. Set Your Anthropic API Key
```bash
# Windows
set ANTHROPIC_API_KEY=your_api_key_here

# Linux/Mac
export ANTHROPIC_API_KEY=your_api_key_here

# Or add to .env file
echo "ANTHROPIC_API_KEY=your_api_key_here" >> .env
```

### 2. Generate Today's Trivia
```bash
# Generate for today
python manage.py generate_daily_trivia

# Generate for a specific date
python manage.py generate_daily_trivia --date 2025-10-07

# Generate for the next 7 days
python manage.py generate_daily_trivia --days-ahead 7

# Force regenerate (overwrites existing)
python manage.py generate_daily_trivia --force
```

### 3. Schedule Daily Generation (Optional)
Set up a cron job or scheduled task to auto-generate trivia:

**Linux/Mac (crontab):**
```bash
# Run every day at 12:01 AM
1 0 * * * cd /path/to/backend && venv/bin/python manage.py generate_daily_trivia
```

**Windows (Task Scheduler):**
```powershell
# Create a scheduled task
$action = New-ScheduledTaskAction -Execute "C:\path\to\backend\venv\Scripts\python.exe" -Argument "manage.py generate_daily_trivia" -WorkingDirectory "C:\path\to\backend"
$trigger = New-ScheduledTaskTrigger -Daily -At "00:01"
Register-ScheduledTask -Action $action -Trigger $trigger -TaskName "GenerateDailyTrivia"
```

## How It Works

### Backend
1. **Claude Service** (`trivia/claude_service.py`)
   - Connects to Claude AI API
   - Sends detailed prompt for trivia generation
   - Receives 15 questions in JSON format
   - Validates question structure

2. **Management Command** (`trivia/management/commands/generate_daily_trivia.py`)
   - Calls Claude service
   - Creates DailyTrivia record
   - Creates 15 TriviaQuestion records
   - Handles errors gracefully

3. **Models** (`trivia/models.py`)
   - Supports both legacy format (option_a, option_b, etc.) and new format (options JSON)
   - Tracks game sessions, answers, stats
   - Calculates scores and rankings

### Frontend
1. **Sound Effects** (Web Audio API)
   - Question reveal: Sultry whoosh/shimmer
   - Correct answer: Sensual success chime
   - Incorrect answer: Playful "oops" sound
   - Completion: Celebratory cascade

2. **Animations** (CSS + React)
   - Question card pulse on reveal
   - Answer options slide in from left
   - Feedback screen with bounce-in emoji
   - Correct: Spinning kiss (üíã)
   - Incorrect: Playful smirk (üòè)

## Question Generation Prompt
Claude generates questions based on these guidelines:
- **Themes:** Seductive history, anatomy, psychology of attraction, aphrodisiacs, famous lovers, sensual arts, erotic literature, adult film history, sexual wellness, relationship dynamics
- **Tone:** Witty, sexy, sensual, intriguing, challenging
- **Style:** Sophisticated adult humor, tasteful yet provocative
- **Difficulty Mix:** 5 easy (10pts), 5 medium (15pts), 5 hard (20pts)
- **Question Types:** Multiple choice, True/False
- **Educational:** Each answer includes fascinating explanations

## Example Generated Theme
**"Seductive Secrets"**
- Question 1 (Easy): Which ancient civilization invented the Kama Sutra?
- Question 5 (Medium): What aphrodisiac was considered so powerful it was banned in medieval monasteries?
- Question 10 (Hard): Which famous courtesan wrote erotic poetry that influenced the French Revolution?

## Troubleshooting

### Error: No API key
```
Solution: Set ANTHROPIC_API_KEY environment variable
```

### Error: Invalid JSON from Claude
```
Solution: Re-run command - Claude occasionally formats responses incorrectly
```

### Error: Trivia already exists
```
Solution: Use --force flag to regenerate
```

## Daily Workflow
1. Auto-generate trivia at midnight (via cron/scheduler)
2. Users play once per day
3. Compete on leaderboard
4. Earn points for discounts
5. Come back tomorrow for new challenge!

## Model Used
- **claude-sonnet-4-5-20250929** (Latest, most creative)
- Temperature: 1.0 (Maximum creativity)
- Max tokens: 8000 (Supports detailed questions)
